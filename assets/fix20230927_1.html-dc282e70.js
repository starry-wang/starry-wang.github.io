import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as n,e as s}from"./app-777ac455.js";const i={},t=s(`<h2 id="问题描述" tabindex="-1"><a class="header-anchor" href="#问题描述" aria-hidden="true">#</a> 问题描述</h2><h3 id="背景" tabindex="-1"><a class="header-anchor" href="#背景" aria-hidden="true">#</a> 背景</h3><p>期望将时区统一配置为<code>GMT+8</code></p><p>测试服务器在海外，基于docker进行服务端配置，初始未在dockerfile中设置时区，服务端Springboot程序未对时区做配置；</p><p>MySQL数据库已配置<code>system_time_zone</code>为<code>CST</code>，<code>time_zone</code>为<code>+8:00</code>。</p><h3 id="描述" tabindex="-1"><a class="header-anchor" href="#描述" aria-hidden="true">#</a> 描述</h3><p>数据库表中有一字段<code>detail_date</code>类型为<code>date</code>，在程序中有针对该字段的时间比较的sql语句，例<br><code>select * from table where detail_date&gt;= #{bgn_date} and detail_date&lt;= #{end_date}</code>。</p><p>在测试过程中发现<code>detail_date=bgn_date</code>的数据不会被检索出来，鉴定为时区错误。</p><h2 id="解决" tabindex="-1"><a class="header-anchor" href="#解决" aria-hidden="true">#</a> 解决</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 在Dockerfile中增加时区配置，最后一直出问题就是dockerfile没进行配置</span>
RUN <span class="token function">ln</span> <span class="token parameter variable">-sf</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
RUN <span class="token builtin class-name">echo</span> <span class="token string">&#39;Asia/Shanghai&#39;</span> <span class="token operator">&gt;</span>/etc/timezone 
    
<span class="token comment"># 在jdbc链接后增加时区配置</span>
<span class="token operator">&amp;</span><span class="token assign-left variable">serverTimezone</span><span class="token operator">=</span>GMT%2B8 

<span class="token comment"># 在程序中对时区进行配置</span>
TimeZone.setDefault<span class="token punctuation">(</span>TimeZone.getTimeZone<span class="token punctuation">(</span><span class="token string">&quot;GMT+8&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="过程中查询资料对时区的了解" tabindex="-1"><a class="header-anchor" href="#过程中查询资料对时区的了解" aria-hidden="true">#</a> 过程中查询资料对时区的了解</h2><p>以下回答来自ChatGPT3.5</p><h3 id="cst、gmt-和-utc-时区对比" tabindex="-1"><a class="header-anchor" href="#cst、gmt-和-utc-时区对比" aria-hidden="true">#</a> CST、GMT 和 UTC 时区对比</h3><ol><li><p><strong>CST（Central Standard Time）</strong>：</p><ul><li>CST 代表中部标准时间，通常与北美中部地区的时区相对应。这包括美国中部地区的城市，如芝加哥、得克萨斯州和密苏里州。</li><li>CST 使用 UTC-6:00 表示，即比协调世界时（UTC）早 6 小时。</li><li>注意，CST 还可以指代中国标准时间，但在国际上，CST 通常与中部标准时间关联较多。</li></ul></li><li><p><strong>GMT（Greenwich Mean Time）</strong>：</p><ul><li>GMT 代表格林威治标准时间，是世界上最早使用的标准时间之一。</li><li>GMT 基于英国格林威治的本初子午线，表示时差相对于该子午线的时间。</li><li>然而，GMT 在实际使用中已经被协调世界时（UTC）所取代，因为 UTC 更加精确，不受夏令时的影响。因此，现在 GMT 和 UTC 几乎是等同的。</li></ul></li><li><p><strong>UTC（Coordinated Universal Time）</strong>：</p><ul><li>UTC 代表协调世界时，是国际标准时间的参考基准，通常用于全球协调时间。</li><li>UTC 使用原子钟的时间测量，以确保高度精确性。它不受夏令时或时区变化的影响，因此是全球通用的时间标准。</li><li>UTC 的时差相对于 GMT 微小，但由于更精确，因此在全球范围内更广泛使用。</li></ul></li></ol><p>请注意，不同地区和国家可能有不同的标准时间和夏令时规则，因此时区的确切表示方式可能会有所不同。在计算时区差异时，最好使用协调世界时（UTC）作为参考基准，以避免混淆和错误。</p>`,15),l=[t];function d(o,c){return a(),n("div",null,l)}const h=e(i,[["render",d],["__file","fix20230927_1.html.vue"]]);export{h as default};
